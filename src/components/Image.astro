---
const cdn = "http://cdn.eriksolsen.com/images/";
const widths = [2000];
//const widths = [2000, 1440, 1080, 720, 480];
const formats = ['avif', 'webp', 'jpeg'];

const {
	file,
	classes,
    sizes
} = Astro.props;

let source = formats.map(format => {
    return `
        <source
            type="image/${format}"
            srcset="${widths.map(function(width) {
                return `${cdn}${file}-w${width}.${format} ${width}w`
            })}"
            sizes="${sizes}"
        >`;
})

let url = `${cdn}${file}-w2000.jpg`;
---

<picture>
    {source}
    <img src={url} class={classes}>
</picture>